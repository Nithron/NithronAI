<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nAI â€” Nithron AI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Background Pattern -->
  <div class="bg-pattern"></div>
  <div class="bg-gradient"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
            <path d="M10 16L14 20L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="logo-text">nAI</span>
        <span class="logo-version">v0.2.0</span>
      </div>
      <div class="header-actions">
        <div class="status-indicator" id="statusIndicator">
          <div class="status-dot"></div>
          <span class="status-text">Connecting...</span>
        </div>
        <button class="btn btn-ghost" id="settingsBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Hero Section -->
    <section class="hero">
      <h1 class="hero-title">
        <span class="gradient-text">Local-first</span> Document Intelligence
      </h1>
      <p class="hero-subtitle">
        Upload your documents, ask questions, get answers with citations. 
        Private by default. No external APIs required.
      </p>
    </section>

    <!-- Tab Navigation -->
    <div class="tabs">
      <button class="tab active" data-tab="ask">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        Ask
      </button>
      <button class="tab" data-tab="ingest">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        Ingest
      </button>
      <button class="tab" data-tab="documents">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        Documents
      </button>
      <button class="tab" data-tab="chat">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        Chat
      </button>
    </div>

    <!-- Tab Panels -->
    <div class="tab-panels">
      <!-- Ask Panel -->
      <div class="tab-panel active" data-panel="ask">
        <div class="card">
          <div class="search-container">
            <div class="search-input-wrapper">
              <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
              </svg>
              <input 
                type="text" 
                id="questionInput" 
                class="search-input" 
                placeholder="Ask anything about your documents..."
                autocomplete="off"
              />
              <button class="btn btn-primary" id="askBtn">
                <span>Ask</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"/>
                  <polyline points="12 5 19 12 12 19"/>
                </svg>
              </button>
            </div>
            <div class="search-options">
              <label class="checkbox-label">
                <input type="checkbox" id="useLlm" checked />
                <span class="checkmark"></span>
                Use LLM (if available)
              </label>
              <div class="select-wrapper">
                <label>Top K:</label>
                <select id="topK">
                  <option value="3">3</option>
                  <option value="5" selected>5</option>
                  <option value="10">10</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Results Area -->
        <div id="resultsArea" class="results-area hidden">
          <div class="result-card">
            <div class="result-header">
              <h3 class="result-title">Answer</h3>
              <span class="result-method" id="resultMethod">extractive</span>
            </div>
            <div class="result-content" id="answerContent">
              <!-- Answer will be rendered here -->
            </div>
          </div>

          <div class="citations-card">
            <h3 class="citations-title">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
              Citations
            </h3>
            <div class="citations-list" id="citationsList">
              <!-- Citations will be rendered here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Ingest Panel -->
      <div class="tab-panel" data-panel="ingest">
        <div class="card">
          <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
            </div>
            <h3 class="upload-title">Drop files here or click to upload</h3>
            <p class="upload-subtitle">Supports PDF, Markdown, TXT, HTML (max 50MB)</p>
            <input type="file" id="fileInput" multiple accept=".pdf,.txt,.md,.markdown,.html,.htm,.rst" class="hidden" />
            <button class="btn btn-secondary" id="browseBtn">Browse Files</button>
          </div>

          <div class="file-list" id="fileList">
            <!-- Selected files will be shown here -->
          </div>

          <div class="upload-actions hidden" id="uploadActions">
            <button class="btn btn-primary" id="ingestBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              Upload & Index
            </button>
            <button class="btn btn-ghost" id="clearFilesBtn">Clear</button>
          </div>
        </div>

        <div class="ingest-results hidden" id="ingestResults">
          <!-- Ingest results will be shown here -->
        </div>
      </div>

      <!-- Documents Panel -->
      <div class="tab-panel" data-panel="documents">
        <div class="card">
          <div class="documents-header">
            <h3 class="documents-title">Indexed Documents</h3>
            <button class="btn btn-ghost" id="refreshDocsBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
              </svg>
              Refresh
            </button>
          </div>

          <div class="documents-stats" id="documentsStats">
            <!-- Stats will be rendered here -->
          </div>

          <div class="documents-list" id="documentsList">
            <!-- Documents will be rendered here -->
          </div>
        </div>
      </div>

      <!-- Chat Panel -->
      <div class="tab-panel" data-panel="chat">
        <div class="chat-container">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-welcome">
              <div class="chat-welcome-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
              </div>
              <h3>Start a conversation</h3>
              <p>Ask questions about your documents in a multi-turn conversation.</p>
            </div>
          </div>
          
          <div class="chat-input-container">
            <textarea 
              id="chatInput" 
              class="chat-input" 
              placeholder="Type your message..."
              rows="1"
            ></textarea>
            <button class="btn btn-primary chat-send" id="chatSendBtn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="22" y1="2" x2="11" y2="13"/>
                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Settings Modal -->
  <div class="modal hidden" id="settingsModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Settings</h3>
        <button class="modal-close" id="closeSettingsBtn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">API Base URL</label>
          <input type="text" id="apiBaseInput" class="form-input" value="http://localhost:8000" />
          <p class="form-hint">The nAI Core backend URL</p>
        </div>
        <div class="form-group">
          <label class="form-label">Theme</label>
          <select id="themeSelect" class="form-select">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
            <option value="system">System</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="cancelSettingsBtn">Cancel</button>
        <button class="btn btn-primary" id="saveSettingsBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="main.js"></script>
</body>
</html>
